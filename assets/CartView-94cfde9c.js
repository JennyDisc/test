import{_ as I,o as d,c as o,a as p,d as t,F as u,f as _,g,t as n,h as f,v as b}from"./index-9402db2e.js";const{VITE_APP_URL:r,VITE_APP_PATH:c}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jenny7532",BASE_URL:"/test/",MODE:"production",DEV:!1,PROD:!0},x={data(){return{products:[],productId:"",cart:{},loadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1}},methods:{getCarts(){this.$http.get(`${r}api/${c}/cart`).then(e=>{this.cart=e.data.data}).catch(e=>{alert(e.data.message)})},updataCartItem(e){const i={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${r}api/${c}/cart/${e.id}`,{data:i}).then(m=>{this.getCarts(),this.loadingItem="",alert("該產品數量調整成功!")})},deleteItem(e){this.loadingItem=e.id,this.$http.delete(`${r}api/${c}/cart/${e.id}`).then(i=>{this.getCarts(),this.loadingItem="",alert("購物車已移除該品項!")})},deleteCarts(){this.loadingItem="delete",this.$http.delete(`${r}api/${c}/carts`).then(e=>{this.getCarts(),alert("購物車已清空!"),this.loadingItem=""})}},mounted(){this.getCarts()}},C={class:"table align-middle"},y=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價"),t("th",null,"小計")])],-1),$=["onClick","disabled"],P={key:0,class:"fas fa-spinner fa-pulse"},V={class:"input-group input-group-sm"},v={class:"input-group mb-3"},k=["onUpdate:modelValue","onChange","disabled"],E=["value"],A={class:"input-group-text",id:"basic-addon2"},T=t("td",{colspan:"4",class:"text-end"},"總計",-1),D={class:"text-end"},L=t("td",{colspan:"4",class:"text-end text-success"},"折扣價",-1),U={class:"text-end text-success"};function q(e,i,m,B,a,h){return d(),o(u,null,[p(" 這是購物車頁面 "),t("table",C,[y,t("tbody",null,[a.cart.carts?(d(!0),o(u,{key:0},_(a.cart.carts,s=>(d(),o("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>h.deleteItem(s),disabled:s.id===a.loadingItem},[a.loadingItem===s.id?(d(),o("i",P)):g("",!0),p(" x ")],8,$)]),t("td",null,n(s.product.title)+" ",1),t("td",null,[t("div",V,[t("div",v,[f(t("select",{name:"",id:"",class:"from-select","onUpdate:modelValue":l=>s.qty=l,onChange:l=>h.updataCartItem(s),disabled:s.id===a.loadingItem},[(d(),o(u,null,_(20,l=>t("option",{value:l,key:`${l}+123`},n(l),9,E)),64))],40,k),[[b,s.qty]]),t("span",A,n(s.product.unit),1)])])]),t("td",null,n(s.product.price),1),t("td",null,n(s.total),1)]))),128)):g("",!0)]),t("tfoot",null,[t("tr",null,[T,t("td",D,n(a.cart.total),1)]),t("tr",null,[L,t("td",U,n(a.cart.final_total),1)])])])],64)}const w=I(x,[["render",q]]);export{w as default};
